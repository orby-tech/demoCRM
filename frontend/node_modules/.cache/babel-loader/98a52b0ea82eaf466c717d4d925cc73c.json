{"ast":null,"code":"var _jsxFileName = \"/home/oem/crm/frontend/src/LoginService.js\";\nimport React, { Component } from 'react';\nimport LoginForm from './LoginForm';\nimport { Redirect } from 'react-router-dom';\nimport './App.css';\n\nclass signLogApp extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handle_login = (e, data) => {\n      e.preventDefault();\n      var myHeaders = new Headers();\n      myHeaders.append(\"Content-Type\", \"application/json\");\n      var raw = JSON.stringify(data);\n      var requestOptions = {\n        method: 'POST',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n      };\n      fetch('http://api.getteam.space/auth-multiple', requestOptions).then(response => response.json()).then(result => {\n        console.log(result.token);\n        localStorage.setItem('username', data.user);\n        localStorage.setItem('token', result.token);\n        window.location.reload();\n      }).catch(error => {\n        alert(\"Ups, may be uncorrect form?\");\n      });\n    };\n\n    this.handle_signup = (e, data) => {\n      e.preventDefault();\n      var myHeaders = new Headers();\n      myHeaders.append(\"Content-Type\", \"application/json\");\n      var raw = JSON.stringify(data);\n      var requestOptions = {\n        method: 'POST',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n      };\n      fetch('http://api.getteam.space/register', requestOptions).then(response => response.json()).then(result => {\n        console.log(result);\n        localStorage.setItem('username', data.user);\n        localStorage.setItem('token', result.token);\n        window.location.reload();\n      }).catch(error => console.log('error', error));\n    };\n\n    this.handle_logout = () => {\n      localStorage.removeItem('token');\n      this.setState({\n        logged_in: false,\n        username: ''\n      });\n    };\n\n    this.display_form = form => {\n      this.setState({\n        displayed_form: form\n      });\n    };\n\n    this.state = {\n      displayed_form: '',\n      logged_in: localStorage.getItem('token') ? true : false,\n      username: ''\n    };\n  }\n\n  componentDidMount() {\n    if (localStorage.getItem('token')) {\n      console.log(\"log\");\n    }\n  }\n\n  render() {\n    if (localStorage.getItem('token')) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/Profile\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 47\n        }\n      });\n    }\n\n    let form;\n\n    switch (this.state.displayed_form) {\n      case 'login':\n        form = /*#__PURE__*/React.createElement(LoginForm, {\n          handle_login: this.handle_login,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 16\n          }\n        });\n        break;\n\n      default:\n        form = null;\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }\n    }, form, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }\n    }, this.state.logged_in ? `Hello, ${localStorage.getItem('username')}` : 'Please Log In')));\n  }\n\n}\n\nexport default signLogApp;","map":{"version":3,"sources":["/home/oem/crm/frontend/src/LoginService.js"],"names":["React","Component","LoginForm","Redirect","signLogApp","constructor","props","handle_login","e","data","preventDefault","myHeaders","Headers","append","raw","JSON","stringify","requestOptions","method","headers","body","redirect","fetch","then","response","json","result","console","log","token","localStorage","setItem","user","window","location","reload","catch","error","alert","handle_signup","handle_logout","removeItem","setState","logged_in","username","display_form","form","displayed_form","state","getItem","componentDidMount","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport LoginForm from './LoginForm';\nimport  { Redirect } from 'react-router-dom';\n\nimport './App.css';\n\n\n\nclass signLogApp extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      displayed_form: '',\n      logged_in: localStorage.getItem('token') ? true : false,\n      username: ''\n    };\n  }\n\n  componentDidMount() {\n    if (localStorage.getItem('token')) {\n      console.log(\"log\")\n    }\n  }\n\n  handle_login = (e, data) => {\n    e.preventDefault();\n    var myHeaders = new Headers();\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n    var raw = JSON.stringify(data);\n    var requestOptions = {\n      method: 'POST',\n      headers: myHeaders,\n      body: raw,\n      redirect: 'follow'\n    };\n    fetch('http://api.getteam.space/auth-multiple', requestOptions)\n      .then(response => response.json())\n      .then(result => {\n        console.log(result.token)\n        localStorage.setItem('username', data.user);\n        localStorage.setItem('token', result.token);\n        window.location.reload();\n\n      })\n      .catch(error => {\n        alert(\"Ups, may be uncorrect form?\")\n      });\n      \n  };\n\n  handle_signup = (e, data) => {\n    e.preventDefault();\n    var myHeaders = new Headers();\n    myHeaders.append(\"Content-Type\", \"application/json\");\n    var raw = JSON.stringify(data);\n    var requestOptions = { method: 'POST',  headers: myHeaders,   body: raw,  redirect: 'follow'};\n    fetch('http://api.getteam.space/register', requestOptions)\n      .then(response => response.json())\n      .then(result => {        \n        console.log(result)\n\n        localStorage.setItem('username', data.user);\n        localStorage.setItem('token', result.token);\n        window.location.reload();\n\n      })\n      .catch(error => console.log('error', error));\n\n  };\n\n  handle_logout = () => {\n    localStorage.removeItem('token');\n    this.setState({ logged_in: false, username: '' });\n  };\n\n  display_form = form => {\n    this.setState({\n      displayed_form: form\n    });\n  };\n\n  render() {\n    if (localStorage.getItem('token')){return <Redirect to='/Profile' />}\n\n\n    let form;\n    switch (this.state.displayed_form) {\n      case 'login':\n        form = <LoginForm handle_login={this.handle_login} />;\n        break;\n      default:\n        form = null;\n    }\n\n    return (\n      <>\n        <div className=\"App\">\n          {form}\n          <h3>\n            {this.state.logged_in\n              ? `Hello, ${localStorage.getItem('username')}`\n              : 'Please Log In'}\n          </h3>\n        </div>\n      </>\n    );\n  }\n}\nexport default signLogApp;\n"]},"metadata":{},"sourceType":"module"}